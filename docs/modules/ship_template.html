<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LotJ Lua API</title>
    <link rel="stylesheet" href="../ldoc_new.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>LOTJ Lua API</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_ShipTemplate">Class ShipTemplate </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/area.html">area</a></li>
  <li><a href="../modules/cargo.html">cargo</a></li>
  <li><a href="../modules/char_proto.html">char_proto</a></li>
  <li><a href="../modules/character.html">character</a></li>
  <li><a href="../modules/clan.html">clan</a></li>
  <li><a href="../modules/core.html">core</a></li>
  <li><a href="../modules/events.html">events</a></li>
  <li><a href="../modules/exit.html">exit</a></li>
  <li><a href="../modules/furniture.html">furniture</a></li>
  <li><a href="../modules/hyperwall.html">hyperwall</a></li>
  <li><a href="../modules/obj_proto.html">obj_proto</a></li>
  <li><a href="../modules/object.html">object</a></li>
  <li><a href="../modules/planet.html">planet</a></li>
  <li><a href="../modules/room.html">room</a></li>
  <li><a href="../modules/ship.html">ship</a></li>
  <li><strong>ship_template</strong></li>
  <li><a href="../modules/space_spawn.html">space_spawn</a></li>
  <li><a href="../modules/starsystem.html">starsystem</a></li>
  <li><a href="../modules/structure.html">structure</a></li>
  <li><a href="../modules/timer.html">timer</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/01-introduction.md.html">Introduction</a></li>
  <li><a href="../topics/02-lua-basics.md.html">Lua Basics</a></li>
  <li><a href="../topics/03-creating-an-lprog.md.html">Creating an lprog</a></li>
  <li><a href="../topics/04-before-after-lylek-drone.md.html">Before and After: Lylek Drone</a></li>
  <li><a href="../topics/gptnpcs.md.html">gptnpcs</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/mixrmastr-bartender-droid.lua.html">mixrmastr-bartender-droid.lua</a></li>
  <li><a href="../examples/yatta-invisible-market.lua.html">yatta-invisible-market.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>ship_template</code></h1>
<p>Functions for ship templates, including triggers</p>
<p>

</p>


<h2><a href="#Class_ShipTemplate">Class ShipTemplate </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:getBaseName">shiptemplate:getBaseName ()</a></td>
	<td class="summary">returns the basename for this ship template.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:getShortname">shiptemplate:getShortname ()</a></td>
	<td class="summary">returns the shotname for this ship template</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onCreate">shiptemplate:onCreate (callback)</a></td>
	<td class="summary">registers a function to run when a ship is first built or created.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onDestroyed">shiptemplate:onDestroyed (callback)</a></td>
	<td class="summary">registers a function to run when a ship is destroyed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onDock">shiptemplate:onDock (callback)</a></td>
	<td class="summary">registers a function to run when a ship starts docking</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onDocked">shiptemplate:onDocked (callback)</a></td>
	<td class="summary">registers a function to run when a ship finishes docking</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onHyper">shiptemplate:onHyper (callback)</a></td>
	<td class="summary">registers a function to run when a ship enters hyperspace</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onHyperExit">shiptemplate:onHyperExit (callback)</a></td>
	<td class="summary">registers a function to run when a ship exits hyperspace</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onLand">shiptemplate:onLand (callback)</a></td>
	<td class="summary">registers a function to run when a ship starts landing</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onLanded">shiptemplate:onLanded (callback)</a></td>
	<td class="summary">registers a function to run when a ship finishes landing</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onLaunch">shiptemplate:onLaunch (callback)</a></td>
	<td class="summary">registers a function to run when a ship starts launching</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onLaunched">shiptemplate:onLaunched (callback)</a></td>
	<td class="summary">registers a function to run when a ship finishes launching</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onSpawned">shiptemplate:onSpawned (callback)</a></td>
	<td class="summary">registers a function to run when a ship is placed in a system via a space spawn.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onTargeted">shiptemplate:onTargeted (callback)</a></td>
	<td class="summary">registers a function to run when a ship is targeted by another ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onTick">shiptemplate:onTick (callback)</a></td>
	<td class="summary">registers a function to run every space tick (20 seconds, when the space prompt shows).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onUndock">shiptemplate:onUndock (callback)</a></td>
	<td class="summary">registers a function to run when a ship begins undocking</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onUndocked">shiptemplate:onUndocked (callback)</a></td>
	<td class="summary">registers a function to run when a ship finishes undocking</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_ShipTemplate"></a>Class ShipTemplate </h2>

          <div class="section-description">
          Functions on ship template variables
          </div>
    <dl class="function">
    <dt>
    <a name = "shiptemplate:getBaseName"></a>
    <strong>shiptemplate:getBaseName ()</strong>
    </dt>
    <dd>
    returns the basename for this ship template.



    <h3>Returns:</h3>
    <ol>

        string the template's basename
    </ol>




</dd>
    <dt>
    <a name = "shiptemplate:getShortname"></a>
    <strong>shiptemplate:getShortname ()</strong>
    </dt>
    <dd>
    returns the shotname for this ship template



    <h3>Returns:</h3>
    <ol>

        string the template's shortname
    </ol>




</dd>
    <dt>
    <a name = "shiptemplate:onCreate"></a>
    <strong>shiptemplate:onCreate (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is first built or created.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being created
 2. the <a href="../modules/character.html#Character">Character</a> who finished it. Can be nil.
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onCreate</span>(<span class="keyword">function</span>(self)
  <span class="comment">-- Place a mob in the ship's cockpit
</span>  Character.<span class="function-name">invoke</span>(<span class="number">12345</span>):<span class="function-name">toRoom</span>(self:<span class="function-name">getCockpit</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onDestroyed"></a>
    <strong>shiptemplate:onDestroyed (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is destroyed.
 This function will run after the ship destruction message is shown to the system,
 but before any players inside the ship are dealt with. You can use it to move
 players off of the ship before they're killed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being destroyed
 2. the <a href="../modules/ship.html#Ship">Ship</a> destroying it (can be nil)
 3. the <a href="../modules/character.html#Character">Character</a> destroying it (can be nil)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onDestroyed</span>(<span class="keyword">function</span>(self, byShip, byChar)
  <span class="keyword">if</span> <span class="keyword">not</span> byChar <span class="keyword">then</span>
    <span class="keyword">return</span>
  <span class="keyword">end</span>
  ch:<span class="function-name">echoAt</span>(<span class="string">"Good job, you destroyed the pirate!"</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onDock"></a>
    <strong>shiptemplate:onDock (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship starts docking


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> initiating docking
 2. the <a href="../modules/ship.html#Ship">Ship</a> being docked with
 3. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> the ships are in
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onDock</span>(<span class="keyword">function</span>(self, target, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onDocked"></a>
    <strong>shiptemplate:onDocked (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship finishes docking


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> that initiated docking
 2. the <a href="../modules/ship.html#Ship">Ship</a> it docked with
 3. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> the ships are in
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onDocked</span>(<span class="keyword">function</span>(self, target, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onHyper"></a>
    <strong>shiptemplate:onHyper (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship enters hyperspace


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> entering hyperspace
 2. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> just exited
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onHyper</span>(<span class="keyword">function</span>(self, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onHyperExit"></a>
    <strong>shiptemplate:onHyperExit (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship exits hyperspace


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> exiting hyperspace
 2. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> just entered
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onHyperExit</span>(<span class="keyword">function</span>(self, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onLand"></a>
    <strong>shiptemplate:onLand (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship starts landing


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> landing
 2. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> being exited
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onLand</span>(<span class="keyword">function</span>(self, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onLanded"></a>
    <strong>shiptemplate:onLanded (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship finishes landing


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> just landed
 2. the <a href="../modules/room.html#Room">Room</a> just landed into
 3. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> just exited
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onLanded</span>(<span class="keyword">function</span>(self, room, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onLaunch"></a>
    <strong>shiptemplate:onLaunch (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship starts launching


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being launched
 2. the <a href="../modules/room.html#Room">Room</a> being launched from
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onLaunch</span>(<span class="keyword">function</span>(self, room)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onLaunched"></a>
    <strong>shiptemplate:onLaunched (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship finishes launching


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> just launched
 2. the <a href="../modules/room.html#Room">Room</a> just launched from
 3. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> just launched into
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onLaunched</span>(<span class="keyword">function</span>(self, room, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onSpawned"></a>
    <strong>shiptemplate:onSpawned (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is placed in a system via a space spawn.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being spawned
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onSpawned</span>(<span class="keyword">function</span>(self)
  <span class="comment">-- Place a mob in the ship's cockpit
</span>  Character.<span class="function-name">invoke</span>(<span class="number">12345</span>):<span class="function-name">toRoom</span>(self:<span class="function-name">getCockpit</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onTargeted"></a>
    <strong>shiptemplate:onTargeted (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is targeted by another ship.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being targeted
 2. the <a href="../modules/ship.html#Ship">Ship</a> targeting it
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onTargeted</span>(<span class="keyword">function</span>(self, targeter)
  self:<span class="function-name">radio</span>(<span class="string">"Help! I'm being attacked by "</span>..targeter:<span class="function-name">getName</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onTick"></a>
    <strong>shiptemplate:onTick (callback)</strong>
    </dt>
    <dd>
    registers a function to run every space tick (20 seconds, when the space prompt shows).
 Only fires for ships which are in a starsystem, not landed/in hyperspace/launching/etc


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a>
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onTick</span>(<span class="keyword">function</span>(self)
  self:<span class="function-name">echoToSystem</span>(<span class="string">"Red lights flash on the exterior of "</span>..self:<span class="function-name">getName</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onUndock"></a>
    <strong>shiptemplate:onUndock (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship begins undocking


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> initiating the undocking
 2. the <a href="../modules/ship.html#Ship">Ship</a> it was docked with
 3. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> the ships are in
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onUndock</span>(<span class="keyword">function</span>(self, target, system)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onUndocked"></a>
    <strong>shiptemplate:onUndocked (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship finishes undocking


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> that initiated undocking
 2. the <a href="../modules/ship.html#Ship">Ship</a> it was docked with
 3. the <a href="../modules/starsystem.html#Starsystem">Starsystem</a> the ships are in
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onUndocked</span>(<span class="keyword">function</span>(self, target, system)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/ldoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2024-12-09 20:53:05 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
