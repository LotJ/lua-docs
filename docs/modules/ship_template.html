<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LotJ Lua API</title>
    <link rel="stylesheet" href="../ldoc_new.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>LOTJ Lua API</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_ShipTemplate">Class ShipTemplate </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/area.html">area</a></li>
  <li><a href="../modules/char_proto.html">char_proto</a></li>
  <li><a href="../modules/character.html">character</a></li>
  <li><a href="../modules/clan.html">clan</a></li>
  <li><a href="../modules/core.html">core</a></li>
  <li><a href="../modules/exit.html">exit</a></li>
  <li><a href="../modules/furniture.html">furniture</a></li>
  <li><a href="../modules/obj_proto.html">obj_proto</a></li>
  <li><a href="../modules/object.html">object</a></li>
  <li><a href="../modules/planet.html">planet</a></li>
  <li><a href="../modules/room.html">room</a></li>
  <li><a href="../modules/ship.html">ship</a></li>
  <li><strong>ship_template</strong></li>
  <li><a href="../modules/space_spawn.html">space_spawn</a></li>
  <li><a href="../modules/starsystem.html">starsystem</a></li>
  <li><a href="../modules/structure.html">structure</a></li>
  <li><a href="../modules/timer.html">timer</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/01-introduction.md.html">Introduction</a></li>
  <li><a href="../topics/02-lua-basics.md.html">Lua Basics</a></li>
  <li><a href="../topics/03-creating-an-lprog.md.html">Creating an lprog</a></li>
  <li><a href="../topics/04-before-after-lylek-drone.md.html">Before and After: Lylek Drone</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/mixrmastr-bartender-droid.lua.html">mixrmastr-bartender-droid.lua</a></li>
  <li><a href="../examples/yatta-invisible-market.lua.html">yatta-invisible-market.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>ship_template</code></h1>
<p>Functions for ship templates, including triggers</p>
<p>

</p>


<h2><a href="#Class_ShipTemplate">Class ShipTemplate </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:getBaseName">shiptemplate:getBaseName ()</a></td>
	<td class="summary">returns the basename for this ship template.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:getFilename">shiptemplate:getFilename ()</a></td>
	<td class="summary">returns the filename for this ship template</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onCreate">shiptemplate:onCreate (callback)</a></td>
	<td class="summary">registers a function to run when a ship is first built or created.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onDestroyed">shiptemplate:onDestroyed (callback)</a></td>
	<td class="summary">registers a function to run when a ship is destroyed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onSpawned">shiptemplate:onSpawned (callback)</a></td>
	<td class="summary">registers a function to run when a ship is placed in a system via a space spawn.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onTargeted">shiptemplate:onTargeted (callback)</a></td>
	<td class="summary">registers a function to run when a ship is targeted by another ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#shiptemplate:onTick">shiptemplate:onTick (callback)</a></td>
	<td class="summary">registers a function to run every space tick (20 seconds, when the space prompt shows).</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_ShipTemplate"></a>Class ShipTemplate </h2>

          <div class="section-description">
          Functions on ship template variables
          </div>
    <dl class="function">
    <dt>
    <a name = "shiptemplate:getBaseName"></a>
    <strong>shiptemplate:getBaseName ()</strong>
    </dt>
    <dd>
    returns the basename for this ship template.



    <h3>Returns:</h3>
    <ol>

        string the template's basename
    </ol>




</dd>
    <dt>
    <a name = "shiptemplate:getFilename"></a>
    <strong>shiptemplate:getFilename ()</strong>
    </dt>
    <dd>
    returns the filename for this ship template



    <h3>Returns:</h3>
    <ol>

        string the template's filename
    </ol>




</dd>
    <dt>
    <a name = "shiptemplate:onCreate"></a>
    <strong>shiptemplate:onCreate (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is first built or created.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being created
 2. the <a href="../modules/character.html#Character">Character</a> who finished it. Can be nil.
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onCreate</span>(<span class="keyword">function</span>(self)
  <span class="comment">-- Place a mob in the ship's cockpit
</span>  Character.<span class="function-name">invoke</span>(<span class="number">12345</span>):<span class="function-name">toRoom</span>(self:<span class="function-name">getCockpit</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onDestroyed"></a>
    <strong>shiptemplate:onDestroyed (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is destroyed.
 This function will run after the ship destruction message is shown to the system,
 but before any players inside the ship are dealt with. You can use it to move
 players off of the ship before they're killed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being destroyed
 2. the <a href="../modules/ship.html#Ship">Ship</a> destroying it (can be nil)
 3. the <a href="../modules/character.html#Character">Character</a> destroying it (can be nil)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onDestroyed</span>(<span class="keyword">function</span>(self, byShip, byChar)
  <span class="keyword">if</span> <span class="keyword">not</span> byChar <span class="keyword">then</span>
    <span class="keyword">return</span>
  <span class="keyword">end</span>
  ch:<span class="function-name">echoAt</span>(<span class="string">"Good job, you destroyed the pirate!"</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onSpawned"></a>
    <strong>shiptemplate:onSpawned (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is placed in a system via a space spawn.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being spawned
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onSpawned</span>(<span class="keyword">function</span>(self)
  <span class="comment">-- Place a mob in the ship's cockpit
</span>  Character.<span class="function-name">invoke</span>(<span class="number">12345</span>):<span class="function-name">toRoom</span>(self:<span class="function-name">getCockpit</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onTargeted"></a>
    <strong>shiptemplate:onTargeted (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a ship is targeted by another ship.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a> being targeted
 2. the <a href="../modules/ship.html#Ship">Ship</a> targeting it
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onTargeted</span>(<span class="keyword">function</span>(self, targeter)
  self:<span class="function-name">radio</span>(<span class="string">"Help! I'm being attacked by "</span>..targeter:<span class="function-name">getName</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "shiptemplate:onTick"></a>
    <strong>shiptemplate:onTick (callback)</strong>
    </dt>
    <dd>
    registers a function to run every space tick (20 seconds, when the space prompt shows).
 Only fires for ships which are in a starsystem, not landed/in hyperspace/launching/etc


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/ship.html#Ship">Ship</a>
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:<span class="function-name">onTick</span>(<span class="keyword">function</span>(self)
  self:<span class="function-name">echoToSystem</span>(<span class="string">"Red lights flash on the exterior of "</span>..self:<span class="function-name">getName</span>())
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/ldoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2023-12-18 16:45:37 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
