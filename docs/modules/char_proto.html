<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LotJ Lua API</title>
    <link rel="stylesheet" href="../ldoc_fixed.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>LOTJ Lua API</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_CharProto">Class CharProto </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><strong>char_proto</strong></li>
  <li><a href="../modules/character.html">character</a></li>
  <li><a href="../modules/core.html">core</a></li>
  <li><a href="../modules/object.html">object</a></li>
  <li><a href="../modules/room.html">room</a></li>
  <li><a href="../modules/ship.html">ship</a></li>
  <li><a href="../modules/ship_template.html">ship_template</a></li>
  <li><a href="../modules/starsystem.html">starsystem</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>char_proto</code></h1>
<p>Functions for mob prototypes, including triggers</p>
<p>

</p>


<h2><a href="#Class_CharProto">Class CharProto </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#CharProto:onDeath">CharProto:onDeath (callback)</a></td>
	<td class="summary">registers a function to run when a mob is killed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CharProto:onFight">CharProto:onFight (callback)</a></td>
	<td class="summary">registers a function to run during each combat round the mob is in.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CharProto:onAct">CharProto:onAct (message, callback)</a></td>
	<td class="summary">registers a function to run when the given action message is shown to the mob.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CharProto:onSpeech">CharProto:onSpeech (message, callback)</a></td>
	<td class="summary">registers a function to run when the given text is spoken in the room.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CharProto:onGreet">CharProto:onGreet (callback)</a></td>
	<td class="summary">registers a function to run when the another character enters the room.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CharProto:onEnter">CharProto:onEnter (callback)</a></td>
	<td class="summary">registers a function to run whenever the mob itself enters a new room.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_CharProto"></a>Class CharProto </h2>

          <div class="section-description">
          Functions on character prototype variables
          </div>
    <dl class="function">
    <dt>
    <a name = "CharProto:onDeath"></a>
    <strong>CharProto:onDeath (callback)</strong>
    </dt>
    <dd>
    registers a function to run when a mob is killed.
 This is run while the mob technically still exists in the room where it died, so it can
 still interact with players and objects there.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. the <a href="../modules/character.html#Character">Character</a> being killed
 2. the <a href="../modules/character.html#Character">Character</a> who killed it (can be nil)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:onDeath(<span class="keyword">function</span>(self, byChar)
  <span class="keyword">if</span> <span class="keyword">not</span> byChar <span class="keyword">then</span>
    <span class="keyword">return</span>
  <span class="keyword">end</span>
  byChar:echoAt(<span class="string">"Good job, you killed "</span>..self:getShortDescription()..<span class="string">"!"</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "CharProto:onFight"></a>
    <strong>CharProto:onFight (callback)</strong>
    </dt>
    <dd>
    registers a function to run during each combat round the mob is in.
 This runs every single round, so use math.rand in the function if you don't need it to happen every time.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. this <a href="../modules/character.html#Character">Character</a>
 2. the <a href="../modules/character.html#Character">Character</a> it's fighting
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:onFight(<span class="keyword">function</span>(self, target)
  target:echoAt(<span class="string">"I'll win this fight yet!"</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "CharProto:onAct"></a>
    <strong>CharProto:onAct (message, callback)</strong>
    </dt>
    <dd>
    registers a function to run when the given action message is shown to the mob.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">message</span>
            <span class="types"><span class="type">string</span></span>
         the message to trigger on
        </li>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. this <a href="../modules/character.html#Character">Character</a>
 2. the <a href="../modules/character.html#Character">Character</a> who did the action
 3. the full text of the action message
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:onAct(<span class="string">"begins drawing a bead on you!"</span>, <span class="keyword">function</span>(self, actor, fullText)
  actor:echoAt(<span class="string">"You can't aim at me!"</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "CharProto:onSpeech"></a>
    <strong>CharProto:onSpeech (message, callback)</strong>
    </dt>
    <dd>
    registers a function to run when the given text is spoken in the room.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">message</span>
            <span class="types"><span class="type">string</span></span>
         the message to trigger on
        </li>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. this <a href="../modules/character.html#Character">Character</a>
 2. the <a href="../modules/character.html#Character">Character</a> who spoke
 3. the full text spoken
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:onSpeech(<span class="string">"assistance"</span>, <span class="keyword">function</span>(self, speaker, fullText)
  speaker:echoAt(<span class="string">"Yeah, sure, I need some help with the womp rats in the warehouse."</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "CharProto:onGreet"></a>
    <strong>CharProto:onGreet (callback)</strong>
    </dt>
    <dd>
    registers a function to run when the another character enters the room.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. this <a href="../modules/character.html#Character">Character</a>
 2. the <a href="../modules/character.html#Character">Character</a> who entered
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:onGreet(<span class="keyword">function</span>(self, target)
  target:echoAt(<span class="string">"You notice "</span>..self:getShortDescription()..<span class="string">" waving at you."</span>)
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "CharProto:onEnter"></a>
    <strong>CharProto:onEnter (callback)</strong>
    </dt>
    <dd>
    registers a function to run whenever the mob itself enters a new room.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">func</span></span>
         the function to run, taking arguments:
 1. this <a href="../modules/character.html#Character">Character</a>
 2. the <a href="../modules/room.html#Room">Room</a> it just entered
 2. the <a href="../modules/room.html#Room">Room</a> it came from
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">self:onEnter(<span class="keyword">function</span>(self, newRoom, oldRoom)
  <span class="comment">-- Do stuff
</span><span class="keyword">end</span>)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2021-03-24 23:30:20 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
