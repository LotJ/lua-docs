<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LotJ Lua API</title>
    <link rel="stylesheet" href="../ldoc_new.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>LOTJ Lua API</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Global_functions">Global functions </a></li>
<li><a href="#Class_Planet">Class Planet </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/LuaDB.html">LuaDB</a></li>
  <li><a href="../modules/area.html">area</a></li>
  <li><a href="../modules/cargo.html">cargo</a></li>
  <li><a href="../modules/char_proto.html">char_proto</a></li>
  <li><a href="../modules/character.html">character</a></li>
  <li><a href="../modules/clan.html">clan</a></li>
  <li><a href="../modules/core.html">core</a></li>
  <li><a href="../modules/events.html">events</a></li>
  <li><a href="../modules/exit.html">exit</a></li>
  <li><a href="../modules/furniture.html">furniture</a></li>
  <li><a href="../modules/hyperwall.html">hyperwall</a></li>
  <li><a href="../modules/obj_proto.html">obj_proto</a></li>
  <li><a href="../modules/object.html">object</a></li>
  <li><strong>planet</strong></li>
  <li><a href="../modules/room.html">room</a></li>
  <li><a href="../modules/ship.html">ship</a></li>
  <li><a href="../modules/ship_template.html">ship_template</a></li>
  <li><a href="../modules/space_spawn.html">space_spawn</a></li>
  <li><a href="../modules/starsystem.html">starsystem</a></li>
  <li><a href="../modules/structure.html">structure</a></li>
  <li><a href="../modules/timer.html">timer</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/01-introduction.md.html">Introduction</a></li>
  <li><a href="../topics/02-lua-basics.md.html">Lua Basics</a></li>
  <li><a href="../topics/03-creating-an-lprog.md.html">Creating an lprog</a></li>
  <li><a href="../topics/04-before-after-lylek-drone.md.html">Before and After: Lylek Drone</a></li>
  <li><a href="../topics/gptnpcs.md.html">gptnpcs</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/mixrmastr-bartender-droid.lua.html">mixrmastr-bartender-droid.lua</a></li>
  <li><a href="../examples/yatta-invisible-market.lua.html">yatta-invisible-market.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>planet</code></h1>
<p>Functions for planets</p>
<p>

</p>


<h2><a href="#Global_functions">Global functions </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Planet.all">Planet.all ()</a></td>
	<td class="summary">returns an iterator over all planets (including stars and moons, so check for flags).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Planet.getFromId">Planet.getFromId (id)</a></td>
	<td class="summary">finds any planet by UID</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Planet.getFromName">Planet.getFromName (name)</a></td>
	<td class="summary">finds any planet by name</td>
	</tr>
</table>
<h2><a href="#Class_Planet">Class Planet </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#planet:addMilitaryPresence">planet:addMilitaryPresence (clan, diff)</a></td>
	<td class="summary">modifies (up or down) military presence for clan.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:addPublicOpinion">planet:addPublicOpinion (clan, diff)</a></td>
	<td class="summary">modifies (up or down) public opinion of a clan.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:addTaxLeech">planet:addTaxLeech (clan, rate)</a></td>
	<td class="summary">adds (or updates) a tax leech for the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:areas">planet:areas ()</a></td>
	<td class="summary">get an iterator over areas on the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:forceEchoRooms">planet:forceEchoRooms ()</a></td>
	<td class="summary">get the list of rooms with the force.echoPossible dvar.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getCrime">planet:getCrime ()</a></td>
	<td class="summary">returns the crime level of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getDescription">planet:getDescription ()</a></td>
	<td class="summary">returns the description of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getGovernedBy">planet:getGovernedBy ()</a></td>
	<td class="summary">returns the clan currently governing the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getMilitary">planet:getMilitary ()</a></td>
	<td class="summary">returns the current military funding level of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getMilitaryPresence">planet:getMilitaryPresence (clan)</a></td>
	<td class="summary">returns the current military presence of the given clan on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getName">planet:getName ()</a></td>
	<td class="summary">returns the name of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getPoliceAlert">planet:getPoliceAlert ()</a></td>
	<td class="summary">returns the police alert level of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getPopulation">planet:getPopulation ()</a></td>
	<td class="summary">returns the current population of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getPosition">planet:getPosition ()</a></td>
	<td class="summary">get the planet's position within system</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getPublicOpinion">planet:getPublicOpinion (clan)</a></td>
	<td class="summary">returns the current public opinion of the given clan on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getRandomPublicRoom">planet:getRandomPublicRoom ()</a></td>
	<td class="summary">tries to find a random public room on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getResource">planet:getResource (resource)</a></td>
	<td class="summary">get the settings for a given resource on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getResourceNames">planet:getResourceNames ()</a></td>
	<td class="summary">get the list of resource names bought or sold on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getResourcePriceHistory">planet:getResourcePriceHistory (resource)</a></td>
	<td class="summary">get the price history for a given resource on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getStarsystem">planet:getStarsystem ()</a></td>
	<td class="summary">get the planet's starsystem</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getTaxLeech">planet:getTaxLeech (clan)</a></td>
	<td class="summary">gets the rate at which a clan is leeching taxes from a planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getTaxModifier">planet:getTaxModifier ()</a></td>
	<td class="summary">gets the tax modifier of a planet</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:getTaxRate">planet:getTaxRate ()</a></td>
	<td class="summary">returns the tax rate percentage of the planet (0-100).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:hasActiveEvent">planet:hasActiveEvent (eventType)</a></td>
	<td class="summary">returns whether the planet currently has the given event running.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:hasFlag">planet:hasFlag (flag)</a></td>
	<td class="summary">get whether a flag is set on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:removeTaxLeech">planet:removeTaxLeech (clan)</a></td>
	<td class="summary">removes a tax leech from the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setCrime">planet:setCrime (number)</a></td>
	<td class="summary">set the crime level of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setFlag">planet:setFlag (flag, value)</a></td>
	<td class="summary">set a flag on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setMilitary">planet:setMilitary (level)</a></td>
	<td class="summary">sets military funding level of the planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setMilitaryPresence">planet:setMilitaryPresence (clan, diff)</a></td>
	<td class="summary">sets the military presence for a clan.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setPublicOpinion">planet:setPublicOpinion (clan, diff)</a></td>
	<td class="summary">sets the 'special events' public opinion effect for a clan.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setResourcePrice">planet:setResourcePrice (resource, curPrice)</a></td>
	<td class="summary">set the price of a resource on this planet.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setTaxLeechExpiration">planet:setTaxLeechExpiration (hours)</a></td>
	<td class="summary">sets an automatic expiration for a tax leech</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#planet:setTaxModifier">planet:setTaxModifier (number)</a></td>
	<td class="summary">set the tax modifier of a planet (cannot be negative)</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Global_functions"></a>Global functions </h2>

    <dl class="function">
    <dt>
    <a name = "Planet.all"></a>
    <strong>Planet.all ()</strong>
    </dt>
    <dd>
    returns an iterator over all planets (including stars and moons, so check for flags).



    <h3>Returns:</h3>
    <ol>

        an iterator of <a href="../modules/planet.html#Planet">Planet</a>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> planet <span class="keyword">in</span> Planet:<span class="function-name">all</span>() <span class="keyword">do</span>
  <span class="comment">-- do something
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "Planet.getFromId"></a>
    <strong>Planet.getFromId (id)</strong>
    </dt>
    <dd>
    finds any planet by UID


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">integer</span></span>
         the planet's UID.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/planet.html#Planet">Planet</a></span>
        the planet, or nil if not found
    </ol>




</dd>
    <dt>
    <a name = "Planet.getFromName"></a>
    <strong>Planet.getFromName (name)</strong>
    </dt>
    <dd>
    finds any planet by name


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><span class="type">string</span></span>
         the planet name.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/planet.html#Planet">Planet</a></span>
        the planet, or nil if not found
    </ol>




</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_Planet"></a>Class Planet </h2>

          <div class="section-description">
          Functions on planet variables
          </div>
    <dl class="function">
    <dt>
    <a name = "planet:addMilitaryPresence"></a>
    <strong>planet:addMilitaryPresence (clan, diff)</strong>
    </dt>
    <dd>
    modifies (up or down) military presence for clan.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to modify military presence for.
        </li>
        <li><span class="parameter">diff</span>
            <span class="types"><span class="type">number</span></span>
         the amount to add. Use a negative number to lower presence.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "planet:addPublicOpinion"></a>
    <strong>planet:addPublicOpinion (clan, diff)</strong>
    </dt>
    <dd>
    modifies (up or down) public opinion of a clan.
 This always shows in smalltalk under the "Special Events" category.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to modify opinion of.
        </li>
        <li><span class="parameter">diff</span>
            <span class="types"><span class="type">number</span></span>
         the amount to add. Use a negative number to lower opinion.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "planet:addTaxLeech"></a>
    <strong>planet:addTaxLeech (clan, rate)</strong>
    </dt>
    <dd>
    adds (or updates) a tax leech for the planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to establish as the tax leech.
        </li>
        <li><span class="parameter">rate</span>
            <span class="types"><span class="type">number</span></span>
         the percentage of total tax revenue to leech (0.01 to 100.00)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- Have the Crimson Dawn steal 60.25% of the total tax revenue generated by the planet
</span><span class="keyword">local</span> crimson = Clan.<span class="function-name">getFromName</span>(<span class="string">"Crimson Dawn"</span>)
planet:<span class="function-name">addTaxLeech</span>(crimson, <span class="number">60.25</span>)
<span class="comment">-- Now update their leech percentage to 20%
</span>planet:<span class="function-name">addTaxLeech</span>(crimson, <span class="number">20.00</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:areas"></a>
    <strong>planet:areas ()</strong>
    </dt>
    <dd>
    get an iterator over areas on the planet.



    <h3>Returns:</h3>
    <ol>

        an iterator of <a href="../modules/area.html#Area">Area</a>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> area <span class="keyword">in</span> planet:<span class="function-name">areas</span>() <span class="keyword">do</span>
  <span class="comment">-- do something
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:forceEchoRooms"></a>
    <strong>planet:forceEchoRooms ()</strong>
    </dt>
    <dd>
    get the list of rooms with the force.echoPossible dvar.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">table</span></span>
        A table of room vnum ints
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> _, vnum <span class="keyword">in</span> <span class="global">ipairs</span>(planet:<span class="function-name">forceEchoRooms</span>()) <span class="keyword">do</span>
  <span class="comment">-- do stuff
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:getCrime"></a>
    <strong>planet:getCrime ()</strong>
    </dt>
    <dd>
    returns the crime level of the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the planet's crime level
    </ol>




</dd>
    <dt>
    <a name = "planet:getDescription"></a>
    <strong>planet:getDescription ()</strong>
    </dt>
    <dd>
    returns the description of the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">string</span></span>
        the planet description
    </ol>




</dd>
    <dt>
    <a name = "planet:getGovernedBy"></a>
    <strong>planet:getGovernedBy ()</strong>
    </dt>
    <dd>
    returns the clan currently governing the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
        the clan who owns the planet, or nil if none is set.
    </ol>




</dd>
    <dt>
    <a name = "planet:getMilitary"></a>
    <strong>planet:getMilitary ()</strong>
    </dt>
    <dd>
    returns the current military funding level of the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the planet's current military funding level.
    </ol>




</dd>
    <dt>
    <a name = "planet:getMilitaryPresence"></a>
    <strong>planet:getMilitaryPresence (clan)</strong>
    </dt>
    <dd>
    returns the current military presence of the given clan on this planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to get military presence for.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the clan's current military presence here.
    </ol>




</dd>
    <dt>
    <a name = "planet:getName"></a>
    <strong>planet:getName ()</strong>
    </dt>
    <dd>
    returns the name of the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">string</span></span>
        the planet name
    </ol>




</dd>
    <dt>
    <a name = "planet:getPoliceAlert"></a>
    <strong>planet:getPoliceAlert ()</strong>
    </dt>
    <dd>
    returns the police alert level of the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the planet's police alert level
    </ol>




</dd>
    <dt>
    <a name = "planet:getPopulation"></a>
    <strong>planet:getPopulation ()</strong>
    </dt>
    <dd>
    returns the current population of the planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the planet's current population
    </ol>




</dd>
    <dt>
    <a name = "planet:getPosition"></a>
    <strong>planet:getPosition ()</strong>
    </dt>
    <dd>
    get the planet's position within system



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">number</span></span>
        the planet's x coordinate</li>
        <li>
           <span class="types"><span class="type">number</span></span>
        the planet's y coordinate</li>
        <li>
           <span class="types"><span class="type">number</span></span>
        the planet's z coordinate</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> x, y, z = planet:<span class="function-name">getPosition</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:getPublicOpinion"></a>
    <strong>planet:getPublicOpinion (clan)</strong>
    </dt>
    <dd>
    returns the current public opinion of the given clan on this planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to get opinion of.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the clan's current public opinion here.
    </ol>




</dd>
    <dt>
    <a name = "planet:getRandomPublicRoom"></a>
    <strong>planet:getRandomPublicRoom ()</strong>
    </dt>
    <dd>
    tries to find a random public room on this planet.
 This can return any room in any area on the planet which is pathable to a public landing pad or hail point.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/room.html#Room">Room</a></span>
        a room if found, or nil if none could be found after 100 attempts
    </ol>




</dd>
    <dt>
    <a name = "planet:getResource"></a>
    <strong>planet:getResource (resource)</strong>
    </dt>
    <dd>
    get the settings for a given resource on this planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">resource</span>
            <span class="types"><span class="type">string</span></span>
         The name of the resource.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">number</span></span>
        The mode for the resource: "none", "import", or "export"</li>
        <li>
           <span class="types"><span class="type">number</span></span>
        The current price</li>
        <li>
           <span class="types"><span class="type">number</span></span>
        The minimum natural price</li>
        <li>
           <span class="types"><span class="type">number</span></span>
        The maximum natural price</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> mode, current, min, max = planet:<span class="function-name">getResource</span>(<span class="string">"goods"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:getResourceNames"></a>
    <strong>planet:getResourceNames ()</strong>
    </dt>
    <dd>
    get the list of resource names bought or sold on this planet.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">table</span></span>
        A table of resource name strings
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> _, resName <span class="keyword">in</span> <span class="global">ipairs</span>(planet:<span class="function-name">getResourceNames</span>()) <span class="keyword">do</span>
  <span class="comment">-- do stuff
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:getResourcePriceHistory"></a>
    <strong>planet:getResourcePriceHistory (resource)</strong>
    </dt>
    <dd>
    get the price history for a given resource on this planet.
 The output is a table which indicates the price over each recorded price tick, about 30
 minutes apart on average.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">resource</span>
            <span class="types"><span class="type">string</span></span>
         The name of the resource.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">table</span></span>
        A table of resource prices over each recorded price tick
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> _, price <span class="keyword">in</span> <span class="global">ipairs</span>(planet:<span class="function-name">getResourcePriceHistory</span>(<span class="string">"goods"</span>)) <span class="keyword">do</span>
  <span class="comment">-- do stuff
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:getStarsystem"></a>
    <strong>planet:getStarsystem ()</strong>
    </dt>
    <dd>
    get the planet's starsystem



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/starsystem.html#Starsystem">Starsystem</a></span>
        the planet's starsystem
    </ol>




</dd>
    <dt>
    <a name = "planet:getTaxLeech"></a>
    <strong>planet:getTaxLeech (clan)</strong>
    </dt>
    <dd>
    gets the rate at which a clan is leeching taxes from a planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan for which the rate is being sought
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the percentage of tax revenue leeched by the clan, or 0 if the clan isn't leeching
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- Gets the tax leech clan and amount, or nil and 0 if there is no tax leech
</span><span class="keyword">local</span> clan = Clan.<span class="function-name">getFromName</span>(<span class="string">"Crimson Dawn"</span>)
<span class="keyword">local</span> amt = planet:<span class="function-name">getTaxLeech</span>(clan)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:getTaxModifier"></a>
    <strong>planet:getTaxModifier ()</strong>
    </dt>
    <dd>
    gets the tax modifier of a planet



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the planet's tax modifier
    </ol>




</dd>
    <dt>
    <a name = "planet:getTaxRate"></a>
    <strong>planet:getTaxRate ()</strong>
    </dt>
    <dd>
    returns the tax rate percentage of the planet (0-100).



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        the planet's tax rate
    </ol>




</dd>
    <dt>
    <a name = "planet:hasActiveEvent"></a>
    <strong>planet:hasActiveEvent (eventType)</strong>
    </dt>
    <dd>
    returns whether the planet currently has the given event running.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">eventType</span>
            <span class="types"><span class="type">string</span></span>
         The type of event, as a string.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
         True if the event is active, false otherwise.
 if planet:hasActiveEvent("holiday") do
   ch:say("We're on holiday!")
 end
    </ol>




</dd>
    <dt>
    <a name = "planet:hasFlag"></a>
    <strong>planet:hasFlag (flag)</strong>
    </dt>
    <dd>
    get whether a flag is set on this planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">flag</span>
            <span class="types"><span class="type">string</span></span>
         The flag to check for
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        True if the flag is set, false otherwise
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">if</span> planet:<span class="function-name">hasFlag</span>(<span class="string">"freeport"</span>) <span class="keyword">do</span>
  ch:<span class="function-name">echoAt</span>(<span class="string">"You can trade cargo here."</span>)
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:removeTaxLeech"></a>
    <strong>planet:removeTaxLeech (clan)</strong>
    </dt>
    <dd>
    removes a tax leech from the planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to remove as a tax leech..
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- Remove the Crimson Dawn as a tax leech
</span><span class="keyword">local</span> crimson = Clan.<span class="function-name">getFromName</span>(<span class="string">"Crimson Dawn"</span>)
planet:<span class="function-name">removeTaxLeech</span>(crimson)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:setCrime"></a>
    <strong>planet:setCrime (number)</strong>
    </dt>
    <dd>
    set the crime level of the planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">number</span>
         the new crime level
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">planet:<span class="function-name">setCrime</span>(planet:<span class="function-name">getCrime</span>()+<span class="number">10</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:setFlag"></a>
    <strong>planet:setFlag (flag, value)</strong>
    </dt>
    <dd>
    set a flag on this planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">flag</span>
            <span class="types"><span class="type">string</span></span>
         The flag to set
        </li>
        <li><span class="parameter">value</span>
            <span class="types"><span class="type">boolean</span></span>
         The new value to set
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">planet:<span class="function-name">setFlag</span>(<span class="string">"freeport"</span>, <span class="keyword">true</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:setMilitary"></a>
    <strong>planet:setMilitary (level)</strong>
    </dt>
    <dd>
    sets military funding level of the planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">level</span>
            <span class="types"><span class="type">number</span></span>
         the new military funding level to set.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "planet:setMilitaryPresence"></a>
    <strong>planet:setMilitaryPresence (clan, diff)</strong>
    </dt>
    <dd>
    sets the military presence for a clan.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to set military presence for.
        </li>
        <li><span class="parameter">diff</span>
            <span class="types"><span class="type">number</span></span>
         the new military presence.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "planet:setPublicOpinion"></a>
    <strong>planet:setPublicOpinion (clan, diff)</strong>
    </dt>
    <dd>
    sets the 'special events' public opinion effect for a clan.
 This always shows in smalltalk under the "Special Events" category.
 Note that the value set here won't be their final opinion.
 It will still be modified up or down by other effects on the planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">clan</span>
            <span class="types"><a class="type" href="../modules/clan.html#Clan">Clan</a></span>
         the clan to set opinion of.
        </li>
        <li><span class="parameter">diff</span>
            <span class="types"><span class="type">number</span></span>
         the new special events effect amount.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "planet:setResourcePrice"></a>
    <strong>planet:setResourcePrice (resource, curPrice)</strong>
    </dt>
    <dd>
    set the price of a resource on this planet.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">resource</span>
            <span class="types"><span class="type">string</span></span>
         The name of the resource.
        </li>
        <li><span class="parameter">curPrice</span>
            <span class="types"><span class="type">number</span></span>
         The minimum price
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- Set the price of goods to 12.5 and to randomly float around between 10 and 15 over time
</span>planet:<span class="function-name">setResource</span>(<span class="string">"goods"</span>, <span class="number">10</span>, <span class="number">12.5</span>, <span class="number">15</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:setTaxLeechExpiration"></a>
    <strong>planet:setTaxLeechExpiration (hours)</strong>
    </dt>
    <dd>
    sets an automatic expiration for a tax leech


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">hours</span>
            <span class="types"><span class="type">number</span></span>
         the number of hours before the leech expires (or 0 for no expiration)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- Have the Crimson Dawn steal 60.25% of the total tax revenue generated by the planet
</span><span class="keyword">local</span> crimson = Clan.<span class="function-name">getFromName</span>(<span class="string">"Crimson Dawn"</span>)
planet:<span class="function-name">setTaxLeechExpiration</span>(crimson, <span class="number">72</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "planet:setTaxModifier"></a>
    <strong>planet:setTaxModifier (number)</strong>
    </dt>
    <dd>
    set the tax modifier of a planet (cannot be negative)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">number</span>
         the new tax modifier
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <li><pre class="example"><span class="comment">-- Raise the tax modifier by 10%
</span>planet:<span class="function-name">setTaxModifier</span>(planet:<span class="function-name">getTaxModifier</span>()+<span class="number">0.1</span>)</pre></li>
        <li><pre class="example"><span class="comment">-- Just double tax revenue
</span>planet:<span class="function-name">setTaxModifier</span>(<span class="number">2.0</span>)</pre></li>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/ldoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2025-12-31 21:59:29 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
